<application>
    <name>workshopTHRISS</name>

    <authors>
        <author email="carlo.mazzola@iit.it"> Carlo Mazzola </author> 
    </authors>

    <!--> #############  ############# ############# <!-->
    <!--> #############     Modules    ############# <!-->
    <!--> #############  ############# ############# <!-->
    
    <module>
        <name>HRImanager</name>
        <parameters></parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>objectRecognition</name>
        <parameters>--task detection </parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>speechProcessing</name>
        <parameters>--model tiny</parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>iChat</name>
        <parameters></parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>interactionInterface</name>
        <parameters></parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>webcam</name>
        <parameters></parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>iKinGazeCtrl</name>
        <parameters>--robot icubSim</parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>interactionInterface</name>
		<parameters>--config HRImanager.sh --context HRIworkshopTHRISS</parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>ctpService</name>
		<parameters>--robot icubSim --part right_arm</parameters>
        <node>localhost</node>
    </module>

    <module>
        <name>ctpService</name>
		<parameters>--robot icubSim --part left_arm</parameters>
        <node>localhost</node>
    </module>

	<module>
        <name>ctpService</name>
		<parameters>--robot icubSim --part torso</parameters>
        <node>localhost</node>
    </module>

    <!--> #############  ############# ############# <!-->
    <!--> #############  Connections   ############# <!-->
    <!--> #############  ############# ############# <!-->
    
    
    <!--> ############# vision ############# <!-->
    
    <connection>
	<from>/webcam/image:o</from>
	<to>/objectRecognition/image:i</to>
	<protocol>tcp</protocol>
    </connection>

    <connection>
	<from>/icubSim/cam/left/rgbImage:o</from>
	<to>/objectRecognition/image:i</to>
	<protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/objectRecognition/objects:o</from>
        <to>/HRImanager/object:wecam:i</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/objectRecognition/objects:o</from>
        <to>/HRImanager/object:sim:i</to>
        <protocol>tcp</protocol>
    </connection>
    
    <!--> ############# haptic ############# <!-->

    <connection>
        <from></from>
        <to>/HRImanager/cube:event:i</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from></from>
        <to>/HRImanager/cube:touch:i</to>
        <protocol>tcp</protocol>
    </connection>

    <!--> ############# speech ############# <!-->
    
    <connection>
        <from>/speechProcessing/text:o</from>
        <to>/HRImanager/text:i</to>
        <protocol>tcp</protocol>
    </connection>
    
    <connection>
        <from>/HRImanager/LLM:o</from>
        <to>/LLMagent/text:i</to>
        <protocol>tcp</protocol>
    </connection>  
    
    <connection>
        <from>/LLMagent/answer:o</from>
        <to>/HRImanager/LLM:i</to>
        <protocol>tcp</protocol>
    </connection>

        <!--> ############# actions ############# <!-->

    <connection>
        <from>/HRImanager/action:rpc</from>
        <to>/interactionInterface</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/HRImanager/gaze:rpc</from>
        <to>/iKinGazeCtrl/rpc</to>
        <protocol>tcp</protocol>
    </connection>


</application>
